version: '3.1'
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
intents:
- affirm
- book_appointment
- bot_challenge
- cancel_appointment
- deny
- goodbye
- greet
- name_form
- request_names
- select_date
- select_department
- select_doctor
- select_time
- thank_you
- gender
- age
entities:
- last_name
- doctor
- date
- time
- department
- first_name
- gender
- age
forms:
  name_form:
    required_slots:
    - first_name
    - last_name
  preliminary_questions_form:
    required_slots:
    - gender
    - age
    - weight_risk
    - hypertension
    - smoker
    - recent_surgeries
  appointment_form:
    required_slots:
    - date
    - time
    - doctor
    - department
slots:
  first_name:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: first_name
  last_name:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: last_name
  gender:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: gender
  age:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: age
  weight_risk:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: weight_risk
  hypertension:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: hypertension
  smoker:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: smoker
  recent_surgeries:
    type: bool
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: preliminary_questions_form
        requested_slot: recent_surgeries
  date:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: date
  time:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: time
  doctor:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: doctor
  department:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: department
  slot_ask_for_second_form:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom
      action: action_check_appointment_form_filled
  slot_ask_for_third_form:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom
      action: action_check_extra_details_form_filled
responses:
  utter_greet:
  - text: Bună ziua! Cu ce vă pot ajuta?
  utter_you_are_welcome:
  - text: Cu mare drag!
  utter_did_that_help:
  - text: V-a ajutat această informație?
  utter_happy:
  - text: Super, vă pot ajuta cu altceva?
  utter_goodbye:
  - text: O zi bună
  utter_iamabot:
  - text: Sunt un chatbot construit cu Rasa.
  utter_ask_first_name:
  - text: Vă rog să introduceți prenumele
  utter_ask_last_name:
  - text: Prenumele dumneavoastră este {first_name}, care este numele?
  utter_submit:
  - text: Ok. Mulțumesc!
  utter_saved_name:
  - text: Numele dumneavoastră este {first_name} {last_name}!
  utter_ask_how_can_I_help:
  - text: Cu ce vă pot fi de folos?
  utter_ask_gender:
  - text: Care este sexul dumneavoastră?
  utter_ask_age:
  - text: Câți ani aveți?
  utter_ask_weight_risk:
  - text: Sunteți supraponderal(ă) sau obez(ă)?
  utter_ask_hypertension:
  - text: Aveți hipertensiune arterială?
  utter_ask_smoker:
  - text: Sunteți fumător?
  utter_ask_recent_surgeries:
  - text: Ați suferit recent o operatie?
  utter_saved_preliminary_questions:
  - text: |
      Mulțumesc, am salvat: 
      Sex - {gender},
      Vârsta - {age},
      Supraponderal/obez - {weight_risk},
      Hipertensiune - {hypertension},
      Fumator - {smoker},
      Operatii recente - {recent_surgeries}
  utter_ask_refferal:
  - text: Aveți bilet de trimitere?
  utter_ask_date:
  - text: În ce dată ați dori să vă programați?
  utter_ask_time:
  - text: La ce oră doriți să vă programați?
  utter_ask_doctor:
  - text: Ce doctor ați dori să vă consulte?
  utter_ask_department:
  - text: Care este specializarea medicală care vă interesează?
  utter_saved_appointment_form:
  - text: Veți fi programat pe data {date}, la ora {time}, la domnul/doamna {doctor} de la departamentul {department}.
  utter_ask_additional_info1:
  - text: Înainte de a trimite programarea, vă voi adresa cateva intrebări suplimentare:"
  utter_ask_additional_info2:
  - text: Înca 2-3 întrebări
actions:
- action_check_appointment_form_filled
- action_check_extra_details_form_filled
- action_save_in_database
- utter_ask_additional_info1
- utter_ask_how_can_I_help
- utter_goodbye
- utter_greet
- utter_iamabot
- utter_saved_appointment_form
- utter_saved_name
- utter_submit
- utter_you_are_welcome
- utter_saved_preliminary_questions
- validate_appointment_form
- validate_name_form
- validate_preliminary_questions_form
