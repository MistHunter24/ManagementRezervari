version: "3.1"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye

- rule: Say hello anytime the user says hello
  steps:
  - intent: greet
  - action: utter_greet

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

- rule: Activate appointment_form
  steps:
  - intent: book_appointment
  - action: appointment_form
  - active_loop: appointment_form

- rule: activate name forms
  condition:
  - slot_was_set:
    - slot_ask_for_second_form: true
  steps:
  - action: name_form
  - active_loop: name_form

- rule: extra forms
  condition:
  - slot_was_set:
    - slot_ask_for_third_form: true
  steps:
    - action: preliminary_questions_form
    - active_loop: preliminary_questions_form

- rule: submit to action_save_in_database
  condition:
  - slot_was_set:
    - slot_ask_for_second_form: true
  - slot_was_set:
    - slot_ask_for_third_form: true
  steps:
  - action: action_save_in_database

- rule: cancel_appointment
  condition:
  - active_loop: cancel_appointment_form
  steps:
  - action: cancel_appointment_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_cancel_appointment_in_database

- rule: raspunsuri chitchat
  steps:
  - intent: chitchat
  - action: utter_chitchat

- rule: chitchat in programare
  condition:
  - active_loop: appointment_form
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: appointment_form
  - active_loop: appointment_form

- rule: chitchat in name_form
  condition:
  - active_loop: name_form
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: name_form
  - active_loop: name_form

- rule: chitchat in preliminary_questions_form
  condition:
  - active_loop: preliminary_questions_form
  steps:
  - intent: chitchat
  - action: utter_chitchat
  - action: preliminary_questions_form
  - active_loop: preliminary_questions_form